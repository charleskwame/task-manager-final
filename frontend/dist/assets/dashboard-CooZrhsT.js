import{a as l,b as J,j as e}from"./context-07D_7xai.js";import{u as Q,b as U,V as a,L as W}from"./index-CyNhz3KD.js";function _(){const{taskData:g,updateTaskStatus:N,deleteTask:C,updateTaskDetails:P,addNewTask:F,isAuthorized:M}=l.useContext(J),[u,A]=l.useState("all"),[L,D]=l.useState(!1),[X,k]=l.useState(!1),[n,R]=l.useState("all"),p=l.useRef(null),[b,x]=l.useState(!1),[r,y]=l.useState(null),[B,T]=l.useState({}),m=l.useRef(null),[v,h]=l.useState(!1),[c,S]=l.useState({task:"",name:"",category:"",priority:"",status:"Pending",dueDate:""}),[o,E]=l.useState({}),O=Q(),f=u==="all"&&n==="all"?g:g.filter(t=>u!=="all"&&n!=="all"?t.category===u&&t.priority===n:n!=="all"?t.priority===n:t.category!=="all"?t.category===u:!0),i=t=>{const{name:s,value:j}=t.target;y(w=>({...w,[s]:j}))},V=t=>{t.preventDefault(),P(r.id,r),x(!1),a.success("Task Edited Successfully")},d=t=>{const{name:s,value:j}=t.target;S(w=>({...w,[s]:j}))},q=t=>{t.preventDefault(),F(c),S({task:"",name:"",category:"",priority:"",status:"Pending",dueDate:""}),h(!1),a.success("New Task Added Successfully")},H=()=>p.current.showModal(),I=()=>p.current.close(),z=()=>m.current.showModal(),K=()=>m.current.close();l.useEffect(()=>{b&&r&&H()},[b,r]),l.useEffect(()=>{v&&z()},[v]),l.useEffect(()=>{const t=s=>{s.key==="Escape"&&(m.current.close(),h(!1))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)});const G=()=>{localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("userId"),O("/register")};return e.jsx(e.Fragment,{children:M?e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:e.jsx(U,{})}),b&&B?e.jsxs("dialog",{ref:p,className:"absolute w-[90%] p-2 lg:w-1/2 lg:p-5 -translate-x-1/2 -translate-y-1/2 rounded-md border-1 border-violet-200 top-1/2 left-1/2",children:[e.jsxs("form",{onSubmit:V,className:"grid w-full gap-4 text-gray-800",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"task",children:"Edit Task Title"}),e.jsx("input",{type:"text",name:"task",value:(r==null?void 0:r.task)||"",onChange:i,className:"flex-1 px-2 py-2 rounded-md border-1 grow border-violet-200 text-violet-500"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col flex-1 gap-2",children:[e.jsx("label",{htmlFor:"name",children:"Edit Name"}),e.jsx("input",{type:"text",name:"name",value:(r==null?void 0:r.name)||"",onChange:i,className:"flex-1 px-2 py-2 rounded-md border-1 grow border-violet-200 text-violet-500"})]}),e.jsxs("div",{className:"flex flex-col flex-1 gap-2",children:[e.jsx("label",{htmlFor:"category",children:"Edit Category"}),e.jsxs("select",{name:"category",value:(r==null?void 0:r.category)||"",onChange:i,className:"flex-1 px-2 py-2 rounded-md border-1 grow border-violet-200 text-violet-500",children:[e.jsx("option",{value:"Onboarding",children:"Onboarding"}),e.jsx("option",{value:"Maintenance",children:"Maintenance"}),e.jsx("option",{value:"Verifying rental",children:"Verifying Rental"})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col flex-1 gap-2",children:[e.jsx("label",{htmlFor:"priority",children:"Edit Priority"}),e.jsxs("select",{name:"priority",id:"",onChange:i,className:"flex-1 px-2 py-2 rounded-md border-1 grow border-violet-200 text-violet-500",children:[e.jsx("option",{value:"Low",children:"Low Priority"}),e.jsx("option",{value:"Medium",children:"Medium Priority"}),e.jsx("option",{value:"High",children:"High Priority"})]})]}),e.jsxs("div",{className:"flex flex-col flex-1 gap-2",children:[e.jsx("label",{htmlFor:"status",children:"Edit Status"}),e.jsxs("select",{name:"status",id:"",onChange:i,className:"flex-1 px-2 py-2 rounded-md border-1 grow border-violet-200 text-violet-500",children:[e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Completed",children:"Completed"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"dueDate",children:"Edit Due Date"}),e.jsx("input",{type:"text",name:"dueDate",value:(r==null?void 0:r.dueDate)||"",onChange:i,className:"flex-1 px-2 py-2 rounded-md border-1 grow border-violet-200 text-violet-500"})]}),e.jsx("button",{type:"submit",className:"px-4 py-2 mt-2 mb-4 font-semibold text-white transition-all duration-300 rounded-md bg-violet-500 hover:bg-white hover:text-violet-500 border-1 border-violet-500",children:"Save Changes"})]}),e.jsx("button",{onClick:()=>{x(!1),I()},className:"px-5 py-2 font-medium text-red-500 duration-500 ease-in-out border-red-200 rounded-md border-1 hover:bg-red-500 hover:text-white transtion-all",children:"Close"})]}):null,v?e.jsxs("dialog",{className:"absolute w-[90%] p-2 lg:w-1/2 lg:p-5 -translate-x-1/2 -translate-y-1/2 rounded-md border-1 border-violet-200 top-1/2 left-1/2",ref:m,children:[e.jsxs("form",{onSubmit:q,className:"grid w-full gap-4 text-gray-800",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"task",children:"Task Title"}),e.jsx("input",{type:"text",name:"task",value:c.task,onChange:d,required:!0,className:"flex-1 px-2 py-2 rounded-md border-1 grow border-violet-200 text-violet-500",placeholder:"Task Title"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col flex-1 gap-2",children:[e.jsx("label",{htmlFor:"name",children:"Client name"}),e.jsx("input",{type:"text",name:"name",value:c.name,onChange:d,required:!0,placeholder:"Kwame",className:"flex-1 px-2 py-2 rounded-md border-1 grow border-violet-200 text-violet-500"})]}),e.jsxs("div",{className:"flex flex-col flex-1 gap-2",children:[e.jsx("label",{htmlFor:"category",children:"Category"}),e.jsxs("select",{required:!0,name:"category",value:c.category,onChange:d,className:"flex-1 px-2 py-2 rounded-md border-1 grow border-violet-200 text-violet-500",children:[e.jsx("option",{value:"",children:"Not Set"}),e.jsx("option",{value:"Onboarding",children:"Onboarding"}),e.jsx("option",{value:"Maintenance",children:"Maintenance"}),e.jsx("option",{value:"Verifying rental",children:"Verifying Rental"})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col flex-1 gap-2",children:[e.jsx("label",{htmlFor:"priority",children:"Priority"}),e.jsxs("select",{required:!0,name:"priority",id:"",onChange:d,className:"flex-1 px-2 py-2 rounded-md border-1 grow border-violet-200 text-violet-500",children:[e.jsx("option",{value:"",children:"Not Set"}),e.jsx("option",{value:"Low",children:"Low Priority"}),e.jsx("option",{value:"Medium",children:"Medium Priority"}),e.jsx("option",{value:"High",children:"High Priority"})]})]}),e.jsxs("div",{className:"flex flex-col flex-1 gap-2",children:[e.jsx("label",{htmlFor:"status",children:"Status"}),e.jsxs("select",{required:!0,name:"status",id:"",onChange:d,className:"flex-1 px-2 py-2 rounded-md border-1 grow border-violet-200 text-violet-500",children:[e.jsx("option",{value:"",children:"Not Set"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Completed",children:"Completed"})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"dueDate",children:"Due Date"}),e.jsx("input",{type:"text",name:"dueDate",value:c.dueDate,onChange:d,required:!0,placeholder:"yyyy-mm-dd",className:"flex-1 px-2 py-2 rounded-md border-1 grow border-violet-200 text-violet-500"})]}),e.jsx("button",{type:"submit",className:"px-4 py-2 mt-2 font-semibold text-white transition-all duration-300 rounded-md bg-violet-500 hover:bg-white hover:text-violet-500 border-1 border-violet-500",children:"Save New Task"})]}),e.jsx("button",{onClick:()=>{h(!1),K()},className:"px-4 py-2 mt-4 font-medium text-red-500 transition-all duration-300 border-red-200 rounded-md border-1 hover:bg-red-500 hover:text-white",children:"Close"})]}):null,e.jsxs("div",{className:"sticky top-0 flex items-center justify-between py-2 bg-white px-1.5 border-1 border-violet-200",children:[e.jsx("h1",{className:"font-bold lg:text-xl text-violet-500",children:"CarSet â€“ Luxury Car Rental Platform"}),e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("button",{className:"px-2 py-1 font-semibold text-white transition-all duration-500 ease-in-out rounded-md cursor-pointer lg:px-4 lg:py-2 border-1 bg-violet-500 hover:text-violet-500 hover:bg-white",onClick:()=>{h(!0)},children:"Add New"}),e.jsx("button",{className:"px-2 py-1 font-semibold text-white transition-all duration-500 ease-in-out rounded-md cursor-pointer lg:px-4 lg:py-2 border-1 bg-red-500 hover:text-red-500 hover:bg-white",onClick:()=>{G()},children:"Log Out"})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2 py-4 font-medium lg:gap-4 lg:flex-row lg:justify-center text-violet-500",children:[e.jsx("label",{htmlFor:"categories",children:"Filter By:"}),e.jsxs("div",{className:"flex items-center gap-2 lg:gap-4",children:[e.jsxs("select",{name:"categories",id:"",onChange:t=>{A(t.target.value),D(!0),k(!0)},className:"px-4 py-1 rounded-md shadow-sm border-1",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"Onboarding",children:"Onboarding"}),e.jsx("option",{value:"Maintenance",children:"Maintenance"}),e.jsx("option",{value:"Verifying rental",children:"Verifying Rental"})]}),e.jsx("p",{children:"-or-"}),e.jsxs("select",{name:"priority",id:"",onChange:t=>{R(t.target.value),D(!0)},className:"px-4 py-1 rounded-md shadow-sm border-1",children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"Low",children:"Low Priority"}),e.jsx("option",{value:"Medium",children:"Medium Priority"}),e.jsx("option",{value:"High",children:"High Priority"})]})]})]}),e.jsx("ul",{className:f.length===0?null:"grid lg:grid-cols-3 gap-1.5 px-1.5",children:L?f.length===0?e.jsx("h1",{className:"block text-lg font-bold text-center text-violet-500",children:"No Tasks Match The Selected Filters"}):f.map(t=>e.jsxs("li",{className:t.status==="Completed"?"line-through border-1 shadow-sm rounded-md border-gray-200 bg-gray-200 p-3 text-sm grid gap-2 text-gray-500":"decoration-0 border-1 shadow-sm rounded-md border-violet-200 p-3 text-sm grid gap-2",children:[e.jsxs("h1",{className:"font-bold text-violet-500",children:["Title: ",t.task]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"grid justify-between font-semibold text-gray-800",children:[e.jsxs("h3",{className:"",children:["Customer: ",t.name]}),e.jsxs("h3",{children:["Priority: ",t.priority]}),e.jsxs("h4",{children:["Date created: ",t.createdAt]})]}),e.jsxs("div",{className:"grid justify-between font-semibold text-gray-800",children:[e.jsxs("h3",{className:"",children:["Category: ",t.category]}),e.jsxs("h3",{children:["Status: ",t.status]}),e.jsxs("h3",{children:["Date due: ",t.dueDate]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{disabled:!!o[t.id]||t.status==="Completed",className:o[t.id]||t.status==="Completed"?"px-3 py-1 text-gray-500 duration-500 ease-in-out border-gray-200 rounded-md border-1":"px-3 py-1 text-white duration-500 ease-in-out bg-green-500 border-green-200 rounded-md cursor-pointer border-1 hover:bg-white hover:text-green-500 transtion-all",onClick:()=>{N(t.id),E(s=>({...s,[t.id]:!0})),a.success("Task Completed Successfully")},children:"Mark Complete"}),e.jsx("button",{disabled:!!o[t.id]||t.status==="Completed",className:o[t.id]||t.status==="Completed"?"px-3 py-1 text-gray-500 duration-500 ease-in-out border-gray-200 rounded-md border-1":"px-3 py-1 text-white duration-500 ease-in-out bg-yellow-500 border-yellow-200 rounded-md cursor-pointer border-1 hover:bg-white hover:text-yellow-500 transtion-all",onClick:()=>{x(!0),T(!0),y({...t})},children:"Edit Task"}),e.jsx("button",{disabled:!!o[t.id]||t.status==="Completed",className:o[t.id]||t.status==="Completed"?"px-3 py-1 text-gray-500 duration-500 ease-in-out border-gray-200 rounded-md border-1":"px-3 py-1 text-white duration-500 ease-in-out bg-red-500 border-red-200 rounded-md cursor-pointer border-1 hover:bg-white hover:text-red-500 transtion-all",onClick:()=>{C(t.id),a.success("Task Deleted Successfully")},children:"Delete Task"})]})]})):g.map(t=>e.jsxs("li",{className:t.status==="Completed"?"line-through border-1 shadow-sm rounded-md border-gray-200 bg-gray-200 p-3 text-sm grid gap-2 text-gray-500":"decoration-0 border-1 shadow-sm rounded-md border-violet-200 p-3 text-sm grid gap-2",children:[e.jsxs("h1",{className:"font-bold text-violet-500",children:["Title: ",t.task]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"grid justify-between font-semibold text-gray-800",children:[e.jsxs("h3",{className:"",children:["Customer: ",t.name]}),e.jsxs("h3",{children:["Priority: ",t.priority]}),e.jsxs("h4",{children:["Date created: ",t.createdAt]})]}),e.jsxs("div",{className:"grid justify-between font-semibold text-gray-800",children:[e.jsxs("h3",{className:"",children:["Category: ",t.category]}),e.jsxs("h3",{children:["Status: ",t.status]}),e.jsxs("h3",{children:["Date due: ",t.dueDate]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{disabled:!!o[t.id]||t.status==="Completed",className:o[t.id]||t.status==="Completed"?"px-3 py-1 text-gray-500 duration-500 ease-in-out border-gray-200 rounded-md border-1":"px-3 py-1 text-white duration-500 ease-in-out bg-green-500 border-green-200 rounded-md cursor-pointer border-1 hover:bg-white hover:text-green-500 transtion-all",onClick:()=>{N(t.id),E(s=>({...s,[t.id]:!0})),a.success("Task Completed Successfully")},children:"Mark Complete"}),e.jsx("button",{disabled:!!o[t.id]||t.status==="Completed",className:o[t.id]||t.status==="Completed"?"px-3 py-1 text-gray-500 duration-500 ease-in-out border-gray-200 rounded-md border-1":"px-3 py-1 text-white duration-500 ease-in-out bg-yellow-500 border-yellow-200 rounded-md cursor-pointer border-1 hover:bg-white hover:text-yellow-500 transtion-all",onClick:()=>{x(!0),T(!0),y({...t})},children:"Edit Task"}),e.jsx("button",{disabled:!!o[t.id]||t.status==="Completed",className:o[t.id]||t.status==="Completed"?"px-3 py-1 text-gray-500 duration-500 ease-in-out border-gray-200 rounded-md border-1":"px-3 py-1 text-white duration-500 ease-in-out bg-red-500 border-red-200 rounded-md cursor-pointer border-1 hover:bg-white hover:text-red-500 transtion-all",onClick:()=>{C(t.id),a.success("Task Deleted Successfully")},children:"Delete Task"})]})]}))})]}):e.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 gap-2 flex flex-col justify-center items-center",children:[e.jsx("h1",{className:"text-center text-lg text-violet-500 font-semibold",children:"Authorization Revoked Due To Page Refresh"}),e.jsx(W,{to:"/login",className:"",children:e.jsx("button",{className:" bg-violet-300 text-white font-semibold hover:bg-violet-500 border-1 border-violet-500 transion-all ease-in-out duration-500 rounded-md px-6 py-2 cursor-pointer",children:"Back to Log In"})})]})})}export{_ as D};
