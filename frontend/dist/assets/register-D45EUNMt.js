import{a as l,b,j as e,c}from"./context-07D_7xai.js";import{u as h,b as v,L as f,V as n}from"./index-CyNhz3KD.js";function k(){const{setIsAuthorized:w}=l.useContext(b),[u,i]=l.useState(!1),[N,g]=l.useState(""),[t,m]=l.useState({userName:"",password:""}),x=h(),d=o=>{const{name:a,value:r}=o.target;m(s=>({...s,[a]:r}))},p=async o=>{var a,r;if(o.preventDefault(),t.userName&&t.password!==""){g(""),i(!0);try{const s=await c.post("https://task-manager-server-ivory-five.vercel.app/register",{username:t.userName,password:t.password});localStorage.setItem("token",s.data.token),localStorage.setItem("userId",s.data.userId),localStorage.setItem("username",s.data.username),c.defaults.headers.common.Authorization=`Bearer ${s.data.token}`,n.success("Registration Success"),x("/login")}catch(s){g(((r=(a=s.response)==null?void 0:a.data)==null?void 0:r.message)||"Registration failed. Please try again."),n.error("Registration Failed. Please try again")}finally{i(!1)}}else n.error("Username or Password not set!")};return e.jsxs(e.Fragment,{children:[e.jsx(v,{}),e.jsx("div",{className:"bg-[url(./assets/carsetbackground.jpg)] lg:bg-none bg-no-repeat bg-center h-screen",children:e.jsxs("div",{className:"lg:gap-0 lg:px-0 lg:flex lg:items-center lg:flex-row absolute top-1/2 left-1/2 lg:left-0 -translate-x-1/2 lg:-translate-x-0 -translate-y-1/2 lg:-translate-y-0 lg:static lg:top-0 w-screen px-5 grid gap-5",children:[e.jsxs("div",{className:"lg:w-[60%] lg:h-screen lg:bg-[url(./assets/carsetbackground.jpg)] bg-no-repeat bg-cover",children:[e.jsx("h1",{className:"text-3xl text-center lg:text-5xl text-violet-500 font-bold  lg:relative lg:top-1/2 lg:left-1/2 lg:-translate-x-1/2 lg:-translate-y-1/2",children:"Safe . Affordable . Luxury"}),e.jsx("p",{className:"text-center font-semibold text-violet-300 lg:relative lg:top-1/2 lg:left-1/2 lg:-translate-x-1/2 lg:-translate-y-1/2",children:"Delivered with a smile."})]}),e.jsxs("form",{className:"border-1 border-violet-200 rounded-md lg:rounded-l-md lg:absolute lg:top-0 lg:right-0 flex flex-col px-3 py-3 lg:py-0 lg:px-5 place-content-center lg:w-[40%] lg:h-screen bg-white shadow-md gap-2",onSubmit:p,children:[e.jsx("h1",{className:"text-2xl font-bold text-violet-500",children:"Register a new user"}),e.jsx("label",{htmlFor:"userName",className:"block text-violet-500 font-medium text-sm",children:"Username"}),e.jsx("input",{type:"text",name:"userName",value:(t==null?void 0:t.userName)||"",onChange:d,minLength:5,maxLength:30,className:"w-full px-3 py-2 border border-violet-200 rounded focus:outline-none focus:ring-2 focus:ring-violet-200 text-violet-500"}),e.jsx("label",{htmlFor:"password",className:"block text-violet-500 font-medium text-sm",children:"Password"}),e.jsx("input",{type:"text",name:"password",value:(t==null?void 0:t.password)||"",onChange:d,minLength:8,maxLength:30,className:"w-full px-3 py-2 border border-violet-200 rounded focus:outline-none focus:ring-2 focus:ring-violet-200 text-violet-500"}),e.jsx("input",{type:"submit",value:u?"Registering...":"Register",className:"w-full bg-violet-500 text-white font-bold py-2 rounded-md hover:bg-violet-300 transition-all ease-in-out duration-500 cursor-pointer border-1 border-violet-500"}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx("p",{className:"text-sm text-violet-500",children:"Already registed?"}),e.jsx(f,{to:"/login",className:"w-fit",children:e.jsx("button",{className:" bg-violet-300 text-white font-semibold hover:bg-violet-500 border-1 border-violet-500 transion-all ease-in-out duration-500 rounded-md px-6 py-2 cursor-pointer",children:"Log In"})})]})]})]})})]})}export{k as R};
